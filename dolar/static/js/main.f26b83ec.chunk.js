(this.webpackJsonpdolar=this.webpackJsonpdolar||[]).push([[0],{25:function(e,a,t){e.exports=t.p+"static/media/logo.48d23102.png"},26:function(e,a,t){e.exports=t(40)},31:function(e,a,t){},32:function(e,a,t){},40:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(22),l=t.n(r),i=(t(31),t(10)),o=t(11),s=t(14),m=t(13),d=(t(32),t(1)),u=t(15),f=t(19),p=t(23),h=t.n(p),E=function(e){var a=c.a.createRef();return Object(n.useEffect)((function(){new h.a(a.current,{type:"line",data:{labels:e.data.map((function(e){return e.Fecha})),datasets:[{label:e.title,data:e.data.map((function(e){return e.Valor.replace(",",".")})),fill:"none",backgroundColor:e.color,pointRadius:2,borderColor:e.color,borderWidth:1,lineTension:0}]}})})),c.a.createElement("canvas",{ref:a})},v=Object(d.f)((function(e){return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"main chart-wrapper"},c.a.createElement(E,{data:e.datos,title:"Dolar",color:"#1ab188"})))})),g=function(e){Object(s.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=a.call.apply(a,[this].concat(c))).state={datos:null,promedio:null,max:null,min:null,error:!1,errorMessage:null,loading:!1},e.conectaAPI=function(){var a=e.props,t=a.apiKey,n=a.fechaInicio,c=a.fechaFinal,r=n.slice(0,4),l=n.slice(4,6),i=n.slice(6,8),o=c.slice(0,4),s=c.slice(4,6),m=c.slice(6,8),d="https://api.sbif.cl/api-sbifv3/recursos_api/dolar/periodo/".concat(r,"/").concat(l,"/dias_i/").concat(i,"/").concat(o,"/").concat(s,"/dias_f/").concat(m,"?apikey=").concat(t,"&formato=json");e.setState({loading:!0}),fetch(d).then((function(e){return e.json()})).then((function(a){return e.calculos(a)})).catch((function(a){e.setState({error:!0,errorMessage:"Red no disponible",loading:!1})}))},e.componentDidMount=function(){e.conectaAPI()},e.componentDidUpdate=function(a){a.fechaFinal===e.props.fechaFinal&&a.fechaInicio===e.props.fechaInicio||e.conectaAPI()},e.calculos=function(a){var t=Object.values(a.Dolares),n=t.map((function(e){return parseFloat(e.Valor)})),c=n.reduce((function(e,a){return e+a}))/t.length,r=Math.min.apply(Math,Object(f.a)(n)),l=Math.max.apply(Math,Object(f.a)(n));e.setState({promedio:c,min:r,max:l,datos:t,error:!1}),e.setState({loading:!1})},e.reprocesar=function(){e.setState({errorMessage:null}),e.conectaAPI()},e}return Object(o.a)(t,[{key:"render",value:function(){var e=c.a.createElement("div",{className:"container-graficos"},c.a.createElement("div",{className:this.state.loading?"hidden":"medidas"},c.a.createElement("div",{className:"medida izquierda"},c.a.createElement("div",{className:"numero"},"$",this.state.min),c.a.createElement("div",{className:"texto-inferior"},"Valor m\xednimo")),c.a.createElement("div",{className:"medida centro"},c.a.createElement("div",{className:"numero"},"$",Math.round(10*this.state.promedio)/10),c.a.createElement("div",{className:"texto-inferior"},"Promedio")),c.a.createElement("div",{className:"medida derecha"},c.a.createElement("div",{className:"numero"},"$",this.state.max),c.a.createElement("div",{className:"texto-inferior"},"Valor m\xe1ximo"))),c.a.createElement("div",{className:"graficos"},this.state.loading&&c.a.createElement("p",{className:"loading"},"Cargando"),this.state.datos&&!this.state.loading&&c.a.createElement(v,{datos:this.state.datos})));return this.state.error&&(e=c.a.createElement("div",null,c.a.createElement("p",null,"Error: ",this.state.errorMessage),c.a.createElement("button",{onClick:this.reprocesar},"Reintentar"))),c.a.createElement("div",null,e)}}]),t}(n.Component),b=Object(d.f)(g),j=t(25),O=t.n(j),N=function(){var e=Object(n.useState)(!0),a=Object(u.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(null),i=Object(u.a)(l,2),o=i[0],s=i[1],m=Object(n.useState)(null),d=Object(u.a)(m,2),f=d[0],p=d[1];Object(n.useEffect)((function(){document.getElementById("fechaFinal").max=(new Date).toISOString().split("T")[0],document.getElementById("fechaInicial").max=(new Date).toISOString().split("T")[0],r(!(f&&+f-+o>=0))}),[f,o]);var h=null;return t||(h=c.a.createElement(b,{fechaInicio:o,fechaFinal:f,apiKey:"9c84db4d447c80c74961a72245371245cb7ac15f"})),c.a.createElement("div",null,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{src:O.a})),c.a.createElement("h1",null,"Valor hist\xf3rico del dolar"),c.a.createElement("p",null,"Ingresa un rango de fechas para ver los valores hist\xf3ricos del dolar"),c.a.createElement("div",{className:"form"},c.a.createElement("div",{className:"fechas"},c.a.createElement("div",null,c.a.createElement("label",null,"Fecha inicial"),c.a.createElement("input",{type:"date",name:"fechaInicio",id:"fechaInicial",onChange:function(e){document.getElementById("fechaFinal").min=e.target.value,s(e.target.value.replace(/-/g,""))}})),c.a.createElement("div",{className:!o&&"hidden"},c.a.createElement("label",null,"Fecha final"),c.a.createElement("input",{type:"date",name:"fechaFinal",id:"fechaFinal",disabled:!o,onChange:function(e){document.getElementById("fechaInicial").max=e.target.value,p(e.target.value.replace(/-/g,""))}}))),f&&t?c.a.createElement("p",null,"Rango de fecha inv\xe1lido"):""),h))},I=function(e){Object(s.a)(t,e);var a=Object(m.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(d.c,null,c.a.createElement(d.a,{path:"/",component:N})))}}]),t}(n.Component),y=Object(d.f)(I),x=t(7),S=c.a.createElement(c.a.StrictMode,null,c.a.createElement(x.a,null,c.a.createElement(y,null)));l.a.render(S,document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.f26b83ec.chunk.js.map