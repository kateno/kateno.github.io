{"version":3,"sources":["logo.png","components/Grafico/graficoPuntos/graficoPuntos.js","components/Grafico/grafico.js","containers/dolar.js","components/landing.js","App.js","index.js"],"names":["module","exports","GraficoPuntos","props","canvasRef","React","createRef","useEffect","Chart","current","type","data","labels","map","d","Fecha","datasets","label","title","Valor","replace","fill","backgroundColor","color","pointRadius","borderColor","borderWidth","lineTension","ref","withRouter","className","datos","Dolar","state","promedio","max","min","error","errorMessage","loading","conectaAPI","apiKey","fechaInicio","fechaFinal","aInicial","slice","mInicial","dInicial","aFinal","mFinal","dFinal","url","setState","fetch","then","response","json","calculos","catch","componentDidMount","componentDidUpdate","prevProps","Object","values","Dolares","arregloDolares","item","parseFloat","promedioDolar","reduce","previous","length","minimo","Math","maximo","reprocesar","contenido","this","round","onClick","Component","Landing","useState","deshabilitado","setDeshabilitado","setFechaInicio","setFechaFinal","document","getElementById","Date","toISOString","split","dolar","src","logo","name","id","onChange","event","target","value","disabled","App","path","component","app","StrictMode","ReactDOM","render"],"mappings":"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","file":"static/js/main.a2fd5e9e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.48d23102.png\";","import React, { useEffect } from \"react\";\r\nimport Chart from \"chart.js\";\r\n\r\nconst GraficoPuntos = props => {\r\n  const canvasRef = React.createRef();\r\n\r\n  useEffect(() => {\r\n    let myChart = new Chart(canvasRef.current, {\r\n      type: \"line\",\r\n      data: {\r\n        labels: props.data.map(d => d.Fecha),\r\n        datasets: [\r\n          {\r\n            label: props.title,\r\n            data: props.data.map(d => d.Valor.replace(\",\", \".\")),\r\n            fill: \"none\",\r\n            backgroundColor: props.color,\r\n            pointRadius: 2,\r\n            borderColor: props.color,\r\n            borderWidth: 1,\r\n            lineTension: 0\r\n          }\r\n        ]\r\n      }\r\n    });\r\n  });\r\n\r\n  return <canvas ref={canvasRef} />;\r\n};\r\n\r\nexport default GraficoPuntos;\r\n","import LineChart from \"./graficoPuntos/graficoPuntos\";\r\nimport React from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst Grafico = props => {\r\n  return (\r\n    <div className=\"App\">\r\n      <div className=\"main chart-wrapper\">\r\n        <LineChart data={props.datos} title=\"Dolar\" color=\"#1ab188\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(Grafico);\r\n","import React, { Component } from \"react\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport Grafico from \"../components/Grafico/grafico\";\r\n\r\nclass Dolar extends Component {\r\n  state = {\r\n    datos: null,\r\n    promedio: null,\r\n    max: null,\r\n    min: null,\r\n    error: false,\r\n    errorMessage: null,\r\n    loading: false\r\n    // apiKey: '9c84db4d447c80c74961a72245371245cb7ac15f'\r\n  };\r\n  conectaAPI = () => {\r\n    const { apiKey, fechaInicio, fechaFinal } = this.props;\r\n    const aInicial = fechaInicio.slice(0, 4);\r\n    const mInicial = fechaInicio.slice(4, 6);\r\n    const dInicial = fechaInicio.slice(6, 8);\r\n    const aFinal = fechaFinal.slice(0, 4);\r\n    const mFinal = fechaFinal.slice(4, 6);\r\n    const dFinal = fechaFinal.slice(6, 8);\r\n\r\n    let url = `https://api.sbif.cl/api-sbifv3/recursos_api/dolar/periodo/${aInicial}/${mInicial}/dias_i/${dInicial}/${aFinal}/${mFinal}/dias_f/${dFinal}?apikey=${apiKey}&formato=json`;\r\n    this.setState({ loading: true });\r\n    fetch(url)\r\n      .then(response => response.json())\r\n      .then(data => this.calculos(data))\r\n      .catch(error => {\r\n        this.setState({\r\n          error: true,\r\n          errorMessage: \"Red no disponible\",\r\n          loading: false\r\n        });\r\n      });\r\n  };\r\n  componentDidMount = () => {\r\n    this.conectaAPI();\r\n  };\r\n  componentDidUpdate = prevProps => {\r\n    if (\r\n      prevProps.fechaFinal !== this.props.fechaFinal ||\r\n      prevProps.fechaInicio !== this.props.fechaInicio\r\n    ) {\r\n      this.conectaAPI();\r\n    }\r\n  };\r\n\r\n  calculos = response => {\r\n    const datos = Object.values(response.Dolares);\r\n    const arregloDolares = datos.map(item => parseFloat(item.Valor));\r\n    const promedioDolar =\r\n      arregloDolares.reduce((previous, current) => previous + current) /\r\n      datos.length;\r\n    const minimo = Math.min(...arregloDolares);\r\n    const maximo = Math.max(...arregloDolares);\r\n    this.setState({\r\n      promedio: promedioDolar,\r\n      min: minimo,\r\n      max: maximo,\r\n      datos: datos,\r\n      error: false\r\n    });\r\n    this.setState({ loading: false });\r\n  };\r\n  reprocesar = () => {\r\n    this.setState({\r\n      errorMessage: null\r\n    });\r\n    this.conectaAPI();\r\n  };\r\n  render() {\r\n    let contenido = (\r\n      <div className=\"container-graficos\">\r\n        <div className={this.state.loading ? \"hidden\" : \"medidas\"}>\r\n          <div className=\"medida izquierda\">\r\n            <div className=\"numero\">${this.state.min}</div>\r\n            <div className=\"texto-inferior\">Valor mínimo</div>\r\n          </div>\r\n          <div className=\"medida centro\">\r\n            <div className=\"numero\">\r\n              ${Math.round(this.state.promedio * 10) / 10}\r\n            </div>\r\n            <div className=\"texto-inferior\">Promedio</div>\r\n          </div>\r\n\r\n          <div className=\"medida derecha\">\r\n            <div className=\"numero\">${this.state.max}</div>\r\n            <div className=\"texto-inferior\">Valor máximo</div>\r\n          </div>\r\n        </div>\r\n        <div className=\"graficos\">\r\n          {this.state.loading && <p className=\"loading\">Cargando</p>}\r\n          {this.state.datos && !this.state.loading && (\r\n            <Grafico datos={this.state.datos} />\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n    if (this.state.error)\r\n      contenido = (\r\n        <div>\r\n          <p>Error: {this.state.errorMessage}</p>\r\n          <button onClick={this.reprocesar}>Reintentar</button>\r\n        </div>\r\n      );\r\n    return <div>{contenido}</div>;\r\n  }\r\n}\r\n\r\nexport default withRouter(Dolar);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Dolar from \"../containers/dolar\";\r\nimport logo from \"../logo.png\";\r\n\r\nconst Landing = () => {\r\n  const modificaFechaFinal = event => {\r\n    document.getElementById(\"fechaInicial\").max = event.target.value;\r\n    setFechaFinal(event.target.value.replace(/-/g, \"\"));\r\n  };\r\n  const modificaFechaInicio = event => {\r\n    document.getElementById(\"fechaFinal\").min = event.target.value;\r\n    setFechaInicio(event.target.value.replace(/-/g, \"\"));\r\n  };\r\n\r\n  const [deshabilitado, setDeshabilitado] = useState(true);\r\n  const [fechaInicio, setFechaInicio] = useState(null);\r\n  const [fechaFinal, setFechaFinal] = useState(null);\r\n\r\n  useEffect(() => {\r\n    document.getElementById(\"fechaFinal\").max = new Date()\r\n      .toISOString()\r\n      .split(\"T\")[0];\r\n    document.getElementById(\r\n      \"fechaInicial\"\r\n    ).max = new Date().toISOString().split(\"T\")[0];\r\n\r\n    if (fechaFinal && +fechaFinal - +fechaInicio >= 0) {\r\n      setDeshabilitado(false);\r\n    } else {\r\n      setDeshabilitado(true);\r\n    }\r\n  }, [fechaFinal, fechaInicio]);\r\n\r\n  let dolar = null;\r\n  if (!deshabilitado) {\r\n    dolar = (\r\n      <Dolar\r\n        fechaInicio={fechaInicio}\r\n        fechaFinal={fechaFinal}\r\n        apiKey=\"9c84db4d447c80c74961a72245371245cb7ac15f\"\r\n      />\r\n    );\r\n  }\r\n  return (\r\n    <div>\r\n      <div className=\"container\">\r\n        <div className=\"logo\">\r\n          <img src={logo}></img>\r\n        </div>\r\n        <h1>Valor histórico del dolar</h1>\r\n        <p>\r\n          Ingresa un rango de fechas para ver los valores históricos del dolar\r\n        </p>\r\n        <div className=\"form\">\r\n          <div className=\"fechas\">\r\n            <div>\r\n              <label>Fecha inicial</label>\r\n              <input\r\n                type=\"date\"\r\n                name=\"fechaInicio\"\r\n                id=\"fechaInicial\"\r\n                onChange={modificaFechaInicio}\r\n              />\r\n            </div>\r\n            <div>\r\n              <label>Fecha final</label>\r\n              <input\r\n                type=\"date\"\r\n                name=\"fechaFinal\"\r\n                id=\"fechaFinal\"\r\n                disabled={!fechaInicio}\r\n                onChange={modificaFechaFinal}\r\n              />\r\n            </div>\r\n          </div>\r\n          {fechaFinal && deshabilitado ? <p>Rango de fecha inválido</p> : \"\"}\r\n        </div>\r\n        {dolar}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Landing;\r\n","import React, { Component } from \"react\";\nimport \"./App.scss\";\nimport { Switch, Route, withRouter } from \"react-router-dom\";\nimport Landing from \"./components/landing\";\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <Switch>\n          <Route path=\"/\" component={Landing} />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(App);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nconst app = (\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>\n);\n\nReactDOM.render(app, document.getElementById(\"root\"));\n"],"sourceRoot":""}